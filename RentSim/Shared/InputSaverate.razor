
@*https://stackoverflow.com/questions/67159943/how-can-i-use-a-custom-component-in-a-blazorise-datagrid-edittemplate*@
@*https://stackoverflow.com/questions/57932850/how-to-make-two-way-binding-on-blazor-component*@

<FieldBody ColumnSize="ColumnSize.Is1"> 
    <Validation Validator="ValidateAmount">
        <NumericEdit TValue="int" DelayTextOnKeyPress="false" @bind-Value="Value" Step="100" onchange="@Redraw"> 
            <Feedback>
                <ValidationError>Saverate is invalid!</ValidationError>
            </Feedback>
        </NumericEdit>
    </Validation>
</FieldBody>

@code{
    private int _value;

    [Parameter]
    public int Value 
    { 
        get => _value; 
        set 
        {
            if (_value == value) return;

            _value = value;
            ValueChanged.InvokeAsync(value).Wait();
        }
    }

    [Parameter]
    public EventCallback<ChangeEventArgs> Redraw { get; set; }

    [Parameter]
    public EventCallback<int> ValueChanged { get; set; }

    void ValidateAmount(ValidatorEventArgs e)
    {
        int currentAmount = (int)e.Value;
        if (currentAmount < 0)
        {
            e.Status = ValidationStatus.Error;
        }
    }
}